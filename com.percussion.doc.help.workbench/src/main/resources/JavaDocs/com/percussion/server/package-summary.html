<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_15) on Mon May 04 13:37:29 EDT 2009 -->
<TITLE>
com.percussion.server (Rhythmyx 6 Public API)
</TITLE>

<META NAME="keywords" CONTENT="com.percussion.server package">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="com.percussion.server (Rhythmyx 6 Public API)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<h4>Rhythmyx 6 Public API</h4></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/percussion/security/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../com/percussion/server/cache/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/percussion/server/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<H2>
Package com.percussion.server
</H2>
This specification defines the E2 server internals.
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#package_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Interface Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/percussion/server/IPSCgiVariables.html" title="interface in com.percussion.server">IPSCgiVariables</A></B></TD>
<TD>The IPSCgiVariables inteface is provided as a convenient mechanism
 for accessing the names of the pre-defined CGI variables.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/percussion/server/IPSInternalRequest.html" title="interface in com.percussion.server">IPSInternalRequest</A></B></TD>
<TD>This interface provides the functionality for making an internal request, and
 if appropriate, retrieving the results of that request.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/percussion/server/IPSLoadableRequestHandler.html" title="interface in com.percussion.server">IPSLoadableRequestHandler</A></B></TD>
<TD>The IPSLoadableRequestHandler interface defines the mechanism by which a
 loadable request handler is initialized.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/percussion/server/IPSRequestContext.html" title="interface in com.percussion.server">IPSRequestContext</A></B></TD>
<TD>The IPSRequestContext interface contains all the context of a given request.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/percussion/server/IPSRequestHandler.html" title="interface in com.percussion.server">IPSRequestHandler</A></B></TD>
<TD>The IPSRequestHandler interface defines the mechanism by which a
 request is sent to the appropriate processing module.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/percussion/server/IPSRootedHandler.html" title="interface in com.percussion.server">IPSRootedHandler</A></B></TD>
<TD>An interface to be implemented by all handlers which have to go into
 the list of rooted handlers.</TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/percussion/server/PSRequestHandlerConfiguration.html" title="class in com.percussion.server">PSRequestHandlerConfiguration</A></B></TD>
<TD>Provides the def for each loadable request handler.</TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Exception Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/percussion/server/PSRequestValidationException.html" title="class in com.percussion.server">PSRequestValidationException</A></B></TD>
<TD>PSRequestValidationException is thrown when a request is deemed to
 be invalidation.</TD>
</TR>
</TABLE>
&nbsp;

<P>
<A NAME="package_description"><!-- --></A><H2>
Package com.percussion.server Description
</H2>

<P>
This specification defines the E2 server internals. These are the classes
used by the server to handle requests.

<H2>Implementation Phases</H2>
<UL>
<LI>???</LI>
</UL>

<H2>Request Mechanisms</H2>

To understand how the E2 server works, we first need to look at how the
request process works. A hook is defined which intercepts requests on the
web server. This hook may be one of the following:
<UL>
<LI><A HREF="doc-files/IsapiFilter.html">ISAPI Filter</A> - 
uses the ISAPI to support Microsoft IIS. Filters are
incorporated into the IIS core. When a request is received by the server,
our hook can catch the request and process it accordingly.</LI>
<LI><A HREF="doc-files/IsapiExtension.html">ISAPI Extension</A> - 
uses the ISAPI to support Microsoft IIS and Apache.
Extensions are called directly be the requestor to handle the request.</LI>
<LI>NSAPI - in a future version, support for Netscape servers will be added
through the NSAPI. NSAPI programs are incorporated into the Netscape server's
core. When a request is received by the server, our hook can catch the
request and process it accordingly.</LI>
<LI>Java Servlet - in a future version, support for a Java servlet
will be added. Web servers supporting Java can use our servlet for handling
requests. Our servlet can also be extended, allowing customers to add
custom pre or post processing to E2 requests.</LI>
<LI>Common Gateway Interface (CGI) - in a future version, support for CGI
will be added. This is supported by most (I dare say all) web servers. The
E2 CGI executable program is called directly be the requestor to handle the
request.</LI>
</UL>

When the request is received through a request filter mechanism, we must
verify that the request is indeed for E2. The first step is to check the
E2 server root against the request URL. If the URL does not begin with the
server root, it is not an E2 request. The request is returned to the web
server untouched. If the server root matches, the appropriate application
must now be found. This is done by running the list of application roots
against the request URL. Once a matching application root is found, the
appropriate data set must be found. Each data set may contain the page name
for the URL. If so, this is checked against the request URL. Since more than
one data set may process the "same" page, the selection conditionals are also
checked. The selection conditions are run against the parameters passed as
the query string in the URL (GET requests) or request body (POST requests).
If they match, the request is processed by the specified data set. If a
data set is not found, the request is given back to the web server untouched.
If the server does not know how to handle the request, an error will be
returned. For instance:
<pre><code>
   http://webserver/E2/ProductCatalog/products.xml&mfr=3M
</code></pre>

When the request is sent directly to an E2 resource (eg, CGI), a slightly
different path is followed. Since E2 is being called directly, if a matching
data set to handle the reqeust is not found, an error is returned. To
determine the data set to use, a special parameter named 
<code>psrequrl</code> must be defined which contains the URL server request
root, application request root and request page as defined for hooks above.
Any other parameters should be added to the request URL (not the
<code>psrequrl</code> parameter). For instance:
<pre><code>
   http://webserver/psisapie.dll?psrequrl=/E2/ProductCatalog/products.xml&mfr=3M
</code></pre>


<H2>Request Processing</H2>

The request information used in the steps noted above must be stored
somewhere the hook can quickly and easily access it. To do this, the hook
mechanisms store the information in shared memory. A listener thread is
created by the hook which registers for changes with the E2 server. Whenever
a change is made in the object store, the E2 server notifies the listener
thread which locks the shared memory and updates it. This model works for
hooks such as ISAPI filters and NSAPI programs which are part of the web
server's core. It is not necessary when E2 is called as a resource (ISAPI
filters, CGI and Java servlets). In the resource hooks, E2 is called
directly, which does the request pre-processing.

Once the pre-processing is done and the request is definitely for E2, the
request is sent to the server. The server immediately hands the request of
to the application handler. It checks if authentication or encryption is
required. If encryption is required and a secure connection is not being
used, an error will be returned. If authentication is required and the user
has not logged in, the appropriate login page will be returned. At this
point, the request is ready for processing. The application handler now
passes the request to the appropriate request handler. A request handler is
defined for query, data modification and cataloging.

<H2>Special E2 Request Parameters</H2>

<UL>
<LI>psrequrl - when a request is submitted using the E2 hook as a resource,
the request page must be specified using this parameter.</LI>
<LI>psaction - perform a special action. This may be:
   <UL>
   <LI>login - log onto the E2 server using the loginid parameter as the
   login id, the loginpw parameter as the password and the logintype
   parameter as the authentication scheme to use. The scheme may be "OS" or
   "ODBC". In the future, "E2" and "LDAP" will also be supported.</LI>
   <LI>logout - logout from the E2 server</LI>
   <LI>serveradmin - this is a server administration request</LI>
   </UL></LI>
</UL>

<H2>Special E2 Cookies</H2>

<UL>
<LI>pssessid - once a user logs in, E2 creates a session to track various
pieces of user information. The session ID is returned to the user in the
form of a cookie.</LI>
</UL>

<H2>Server Tasks</H2>

When the server comes up, it performs the following actions:
<OL>
<LI>loads its configuration info from the configuration file</LI>
<LI>loads all applications from the object store. The object store location
is defined in the configuration file.</LI>
<LI>registers the object store listener (PSObjectStoreListener). The
object store listener is a hook into the object store which allows
applications to be modified on the fly.</LI>
<LI>creates an application handler for each application</LI>
<LI>initializes the user thread pool (PSUserThreadPool). All threads which
can be used to handle requests are managed by the thread pool. When a request
comes in, it is assigned to an idle thread.</LI>
<LI>initializes the request queue (PSRequestQueue), including the request
queue handler thread. When there are no more available user threads in the
pool, the request can be queued through the request queue. The handler 
thread waits for threads to become available. When a thread becomes
available, it is handed the request. If the request is in queue for too
long, it is timed out.</LI>
<LI>starts the request listener thread (PSRequestListener). The request
listener thread catches incoming connection requests from the hook. It then
hands off the request to a user thread or the request queue.</LI>
</OL>
<P>

<P>
<DL>
</DL>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<h4>Rhythmyx 6 Public API</h4></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/percussion/security/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../com/percussion/server/cache/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/percussion/server/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
<i>Copyright &#169; 1999 - 2009 Percussion Software Inc. All Rights Reserved.</i>
</BODY>
</HTML>
